
set {
  SOURCES
  in-sources {
    ..@{autark glob '*.c'}
  }
}

set {
  CC
  ${CC cc}
}

cc {
  ${SOURCES}
  ${CFLAGS}
  ${CC}
}

foreach {
  OBJ
  ${CC_OBJS}
  run {
    exec { ${CC} ${OBJ} -o %{${OBJ}} }
    shell { %{${OBJ}} >> ./tests.log }
    produces {
      %{${OBJ}}
    }
    consumes {
      ${OBJ}
    }
  }
}